<!doctype html><html lang="en" dir="ltr"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Speedoodle ðŸš€ â€” Internet Speed Test</title>
<meta name="description" content="Speedoodle ðŸš€ â€” test your download, upload, and ping in real-time.">
<link rel="canonical" href="https://speedoodle.com/">
<link rel="stylesheet" href="site.css">
<!-- AdSense verification -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8054613411767519" crossorigin="anonymous"></script>
</head><body>
<header><a href="./">Speedoodle ðŸš€</a></header>
<main class="container">
  <section id="results">
    <div class="stat"><span class="label">Download</span><div class="value" id="dl">0</div></div>
    <div class="stat"><span class="label">Upload</span><div class="value" id="ul">0</div></div>
    <div class="stat"><span class="label">Ping</span><div class="value" id="pg">0</div></div>
  </section>
  <button id="runTest">Run Test</button>
</main>
<footer><a href="privacy.html">Privacy</a> Â· <a href="terms.html">Terms</a> Â· <a href="about.html">About</a> Â· <a href="contact.html">Contact</a></footer>
<script>
function makeCounter(id,decimals=1){const el=document.getElementById(id);let cur=0;return v=>{const start=cur,diff=v-start,t0=performance.now();function tick(now){const p=Math.min(1,(now-t0)/400);const n=start+diff*p;el.textContent=n.toFixed(decimals);if(p<1)requestAnimationFrame(tick);else cur=v;}requestAnimationFrame(tick);};}
function ramp(t){document.body.classList.toggle('testing',t);}
const dl=makeCounter('dl',1),ul=makeCounter('ul',1),pg=makeCounter('pg',0);
const CF_BASE="https://speed.cloudflare.com",PARALLEL_STREAMS=6,DL_DURATION_MS=8000,UL_DURATION_MS=6000,WARMUP_MS=2000,WINDOW_MS=2000,CHUNK_BYTES_DL=5*1024*1024,CHUNK_BYTES_UP=256*1024;
function humanMbps(b){return(!b||!isFinite(b))?0:(b/1048576);}
async function measureLatency(base,a=3){const l=[];for(let i=0;i<a;i++){const u=`${base}/__down?bytes=1&ts=${Math.random()}`,t0=performance.now();try{const r=await fetch(u,{cache:"no-store"});if(!r.ok)throw new Error();const t1=performance.now();l.push(t1-t0);}catch{l.push(9999);}}return l.reduce((s,x)=>s+x,0)/l.length;}
async function downloadTest(base){let rec=0;const start=performance.now(),stopAt=start+DL_DURATION_MS,warm=start+WARMUP_MS,samples=[];let peak=0;async function one(){while(performance.now()<stopAt){const url=`${base}/__down?bytes=${CHUNK_BYTES_DL}&ts=${Math.random()}`,r=await fetch(url,{cache:"no-store"});if(!r.ok||!r.body)break;const reader=r.body.getReader();while(true){const {done,value}=await reader.read();if(done)break;rec+=value.byteLength;const now=performance.now();samples.push({t:now,bytes:value.byteLength});while(samples.length&&samples[0].t<now-WINDOW_MS)samples.shift();if(now>warm){const bps=samples.reduce((s,x)=>s+x.bytes,0)*8/(WINDOW_MS/1000);if(bps>peak)peak=bps;}}if(performance.now()+80>stopAt)break;}}await Promise.allSettled(Array.from({length:PARALLEL_STREAMS},one));const eff=Math.min(warm,stopAt),secs=Math.max(.001,(Math.min(performance.now(),stopAt)-eff)/1000);return{avgBps:(rec*8)/secs,peakBps:peak};}
async function uploadTest(base){let sent=0;const stopAt=performance.now()+UL_DURATION_MS,payload=new Uint8Array(CHUNK_BYTES_UP);async function one(){while(performance.now()<stopAt){const r=await fetch(`${base}/__up?ts=${Math.random()}`,{method:"POST",body:payload,cache:"no-store"});if(!r.ok)break;sent+=payload.byteLength;if(performance.now()+50>stopAt)break;}}await Promise.allSettled(Array.from({length:PARALLEL_STREAMS},one));return{bitsPerSec:(sent*8)/(UL_DURATION_MS/1000)};}
async function runSpeedTest({onProgress}={}){const ping=await measureLatency(CF_BASE,3);onProgress&&onProgress({ping});const dlRes=await downloadTest(CF_BASE);onProgress&&onProgress({download:Number(humanMbps(dlRes.avgBps).toFixed(1))});const upRes=await uploadTest(CF_BASE);onProgress&&onProgress({upload:Number(humanMbps(upRes.bitsPerSec).toFixed(1))});}
document.getElementById('runTest').addEventListener('click',async()=>{ramp(true);dl(0);ul(0);pg(0);try{await runSpeedTest({onProgress({download,upload,ping}){if(download!=null)dl(download);if(upload!=null)ul(upload);if(ping!=null)pg(ping);}});}finally{ramp(false);}});
</script>
</body></html>
